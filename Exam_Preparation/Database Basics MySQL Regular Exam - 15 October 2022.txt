01. Table Design
CREATE TABLE `products`(
`id` INT PRIMARY KEY AUTO_INCREMENT,
`name` VARCHAR(30) NOT NULL UNIQUE,
`type` VARCHAR(30) NOT NULL,
`price` DECIMAL(10, 2) NOT NULL
);

CREATE TABLE `clients` (
`id` INT PRIMARY KEY AUTO_INCREMENT,
`first_name` VARCHAR(50) NOT NULL,
`last_name` VARCHAR(50) NOT NULL,
`birthdate` DATE NOT NULL,
`card` VARCHAR(50),
`review` TEXT
);

CREATE TABLE `tables`(
`id` INT PRIMARY KEY AUTO_INCREMENT,
`floor` INT NOT NULL,
`reserved` BOOLEAN,
`capacity` INT NOT NULL
);

CREATE TABLE `waiters`(
`id` INT PRIMARY KEY AUTO_INCREMENT,
`first_name` VARCHAR(50) NOT NULL,
`last_name` VARCHAR(50) NOT NULL,
`email` VARCHAR(50) NOT NULL,
`phone` VARCHAR(50) ,
`salary` DECIMAL(10, 2)
);

CREATE TABLE `orders` (
`id` INT PRIMARY KEY AUTO_INCREMENT,
`table_id` INT NOT NULL,
`waiter_id` INT NOT NULL,
`order_time` TIME NOT NULL,
`payed_status` BOOLEAN,
CONSTRAINT fk_orders_table
FOREIGN KEY (`table_id`)
REFERENCES `tables` (`id`),
CONSTRAINT fk_orders_waiter
FOREIGN KEY (`waiter_id`)
REFERENCES `waiters`(`id`)
);

CREATE TABLE `orders_clients`(
`order_id` INT,
`client_id` INT,
CONSTRAINT fk_orders_order
FOREIGN KEY (`order_id`)
REFERENCES `orders` (`id`),
CONSTRAINT fk_clients_client
FOREIGN KEY (`client_id`)
REFERENCES `clients` (`id`)
);

CREATE TABLE `orders_products`(
`order_id` INT,
`product_id` INT,
CONSTRAINT fk_products_order
FOREIGN KEY (`order_id`)
REFERENCES `orders`(`id`),
CONSTRAINT fk_products_product
FOREIGN KEY (`product_id`)
REFERENCES `products`(`id`)
);

02. Insert
INSERT INTO `products` (`name`, `type`, `price`)
SELECT DISTINCT(CONCAT_WS(' ', w.`last_name`, 'specialty')), 'Cocktail', CEIL(w.`salary` * 0.01) FROM `waiters` AS w
WHERE w.`id` > 6;

03. Update
UPDATE `orders`
SET `table_id` = `table_id` - 1
WHERE `id` BETWEEN (12) AND (23);

04. Delete
DELETE w FROM `waiters` AS w
LEFT JOIN `orders` AS o ON o.`waiter_id` = w.`id`
WHERE o.`waiter_id` IS NULL;

